# Reddit Comments Supervision Example

## Dependencies

Before you begin, ensure you have the following dependencies installed:

- **Python 3.11+**

### Installation

1. **Install Dependencies**

   ```bash
   pip install -r requirements.txt
   ```

## Overview

This example demonstrates how to use the Asteroid SDK to supervise an AI assistant that automates Reddit comments on behalf of users. It showcases how to create supervisors that enforce policies such as:

- Ensuring comments do not contain specific disallowed phrases.
- Adhering to a Reddit comment policy (e.g., providing helpful, relevant, and personalized content).
- Keeping comments within a specified character limit.
- Escalating to a human supervisor when automated supervisors reject the output.

## Quickstart

### Running the Example

1. **Configure Your API Keys**

   Ensure that you have configured your API keys for Asteroid and OpenAI. You can set them as environment variables:

   ```bash
   export ASTEROID_API_KEY="your-asteroid-api-key"
   export ASTEROID_API_URL="your-asteroid-api-url"
   export OPENAI_API_KEY="your-openai-api-key"
   ```

2. **Execute the Script**

   ```bash
   python cookbook/reddit_comments/run.py
   ```

3. **Observe the Output**

   The script will output a Reddit comment generated by the AI assistant, which has been supervised to ensure it complies with the defined policies. This comment is intended to engage with a Reddit community on behalf of a user.

### Example Supervisors

- **Length Supervisor**: Rejects any generated comment that exceeds a specified maximum character length (e.g., 500 characters).
- **Regex Supervisor**: Checks for disallowed phrases (e.g., "Buy now", "Limited time offer", "Click here") and rejects comments containing them.
- **LLM Supervisor**: Utilizes a language model to ensure the comment adheres to the Reddit comment policy, such as providing helpful and relevant content.
- **Human Supervisor**: Provides a mechanism for escalation to a human reviewer if the automated supervisors reject the comment after resampling attempts.

## Customization

You can customize the example to suit different Reddit communities or policies:

- **Adjust the Reddit Comment Policy**: Modify the `reddit_comment_policy` variable in `run.py` to enforce different guidelines.
- **Change the Maximum Comment Length**: Set the `max_length_value` variable in `run.py` to alter the maximum allowed length of comments.
- **Update Disallowed Phrases**: Modify the `patterns` list in the `regex_supervisor` to check for different disallowed phrases.

## Learning Points

This example illustrates:

- How to use the Asteroid SDK to supervise LLM outputs in an automated content generation context.
- Implementing custom supervisors to enforce specific business rules or policies.
- Combining multiple supervisors to create a robust supervision pipeline that includes automated checks and human oversight.

